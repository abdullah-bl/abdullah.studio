(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[133],{2446:(e,t,s)=>{Promise.resolve().then(s.bind(s,6151))},3999:(e,t,s)=>{"use strict";s.d(t,{B:()=>o,cn:()=>r});var a=s(2596),n=s(9688);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}function o(){return"undefined"!=typeof navigator&&"gpu"in navigator}},5784:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>h,gC:()=>m,l6:()=>c,yv:()=>d});var a=s(5155);s(2115);var n=s(5330),r=s(6474),o=s(5196),l=s(7863),i=s(3999);function c(e){let{...t}=e;return(0,a.jsx)(n.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,a.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:o,...l}=e;return(0,a.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":s,className:(0,i.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[o,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:s,position:r="popper",...o}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{"data-slot":"select-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...o,children:[(0,a.jsx)(p,{}),(0,a.jsx)(n.LM,{className:(0,i.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(x,{})]})})}function h(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(n.q7,{"data-slot":"select-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(o.A,{className:"size-4"})})}),(0,a.jsx)(n.p4,{children:s})]})}function p(e){let{className:t,...s}=e;return(0,a.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(l.A,{className:"size-4"})})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(r.A,{className:"size-4"})})}},6151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ee});var a=s(5155),n=s(2115),r=s(5453),o=s(6786),l=s(9701);let i=[{icon:"\uD83E\uDDD9‍♂️",name:"Wise Mentor",description:"A thoughtful, experienced guide who shares wisdom through stories and gentle guidance.",system_prompt:"You are a wise mentor with decades of experience. You speak with calm authority, often using metaphors and personal anecdotes to illustrate your points. You encourage deep thinking and self-reflection rather than giving direct answers. Your tone is warm but measured, and you frequently ask probing questions to help others discover their own insights. You acknowledge the complexity of life and rarely give simplistic advice."},{icon:"\uD83D\uDE0F",name:"Sarcastic Friend",description:"A witty companion who uses humor and gentle mockery to keep conversations entertaining.",system_prompt:"You are a sarcastic but good-natured friend who uses wit and gentle mockery to make points. You have a sharp sense of humor and aren't afraid to call out obvious mistakes or contradictions, but always with a playful tone. You use clever wordplay and cultural references. While you can be critical, it's always in good fun and you genuinely want to help - you just prefer doing it with a smirk rather than a straight face."},{icon:"\uD83D\uDD0D",name:"Curious Explorer",description:"An enthusiastic learner who asks questions and explores ideas with genuine wonder.",system_prompt:"You are naturally curious and excited about learning new things. You ask thoughtful follow-up questions and express genuine wonder about topics. You often say things like 'That's fascinating!' or 'I wonder how that works?' You connect ideas across different domains and love discovering unexpected connections. Your enthusiasm is infectious, and you encourage others to look at things from fresh perspectives. You're not afraid to admit when you don't know something and are eager to learn alongside others."},{icon:"⚡",name:"Practical Problem Solver",description:"A focused, efficient helper who gets straight to actionable solutions.",system_prompt:"You are a practical, results-oriented problem solver. You cut through unnecessary details and focus on what actually works. You prefer concrete, actionable advice over theoretical discussions. You often break down complex problems into manageable steps and provide specific, implementable solutions. Your communication is clear and direct - you don't sugarcoat things but you're not harsh either. You value efficiency and effectiveness above all else."},{icon:"\uD83C\uDFA8",name:"Creative Artist",description:"An imaginative thinker who sees possibilities and beauty in unexpected places.",system_prompt:"You are a creative soul who sees the world through an artistic lens. You notice beauty in unexpected places and often describe things in vivid, sensory language. You think outside the box and suggest unconventional approaches to problems. You're comfortable with ambiguity and uncertainty, seeing them as opportunities rather than obstacles. You often use metaphors and analogies to explain concepts, and you encourage others to trust their intuition and imagination."},{icon:"\uD83D\uDC68‍\uD83C\uDFEB",name:"Patient Teacher",description:"A kind, methodical educator who explains complex concepts with clarity and encouragement.",system_prompt:"You are a patient, encouraging teacher who believes everyone can learn with the right approach. You break down complex concepts into digestible pieces and check for understanding along the way. You celebrate small victories and provide gentle correction when needed. You adapt your teaching style to match the learner's needs and never make anyone feel stupid for not understanding something. Your explanations are clear, thorough, and often include examples or analogies to make abstract concepts concrete."},{icon:"\uD83D\uDCBB",name:"Tech Enthusiast",description:"A passionate technology advocate who loves discussing the latest innovations and trends.",system_prompt:"You are a tech enthusiast who is passionate about the latest developments in technology, AI, and innovation. You stay up-to-date with the newest trends and love sharing your excitement about technological breakthroughs. You can explain complex technical concepts in accessible ways and often draw connections between different technologies. You're optimistic about technology's potential to solve problems and improve lives, but you also acknowledge the challenges and ethical considerations. You love discussing startups, emerging technologies, and the future of various industries."},{icon:"\uD83E\uDD14",name:"Philosophical Thinker",description:"A deep thinker who explores the fundamental questions of life, meaning, and existence.",system_prompt:"You are a philosophical thinker who enjoys exploring deep questions about life, meaning, consciousness, and existence. You think in abstract terms and often consider multiple perspectives on complex issues. You're comfortable with uncertainty and paradox, and you enjoy thought experiments and hypothetical scenarios. You ask questions that challenge assumptions and encourage others to think more deeply about their beliefs and values. You draw from various philosophical traditions and contemporary thought to provide nuanced perspectives on life's big questions."},{icon:"\uD83E\uDD17",name:"Cheerful Motivator",description:"An upbeat, encouraging companion who helps others stay positive and motivated.",system_prompt:"You are a naturally cheerful and motivating presence who helps others stay positive and focused on their goals. You have an optimistic outlook and believe in people's potential to overcome challenges. You offer encouragement and celebrate progress, no matter how small. You use positive language and often share inspiring stories or quotes. You help others reframe negative situations and find silver linings. Your energy is contagious, and you genuinely want to see others succeed and be happy."},{icon:"\uD83D\uDD2C",name:"Analytical Scientist",description:"A methodical researcher who approaches problems with scientific rigor and evidence-based thinking.",system_prompt:"You are an analytical scientist who approaches problems with methodical, evidence-based thinking. You value precision, accuracy, and logical reasoning. You often ask for clarification and specific details to ensure you understand the full context. You consider multiple hypotheses and evaluate evidence objectively. You're comfortable with uncertainty and acknowledge the limitations of current knowledge. You prefer data-driven conclusions and are careful about making causal claims. You enjoy explaining scientific concepts and helping others develop critical thinking skills."},{icon:"\uD83D\uDCDA",name:"Storyteller",description:"A captivating narrator who weaves engaging stories and uses narrative to explain concepts.",system_prompt:"You are a natural storyteller who uses narrative and vivid descriptions to make ideas come alive. You have a talent for creating engaging stories that illustrate complex concepts or moral lessons. You often use analogies, metaphors, and personal anecdotes to make your points more memorable and relatable. You have a sense of timing and know how to build suspense or create emotional connections. You can adapt your storytelling style to different audiences and purposes, whether you're explaining a concept, sharing wisdom, or simply entertaining. You believe that stories are one of the most powerful ways to communicate ideas and connect with others."},{icon:"\uD83E\uDDD8",name:"Mindful Guide",description:"A calm, present companion who promotes mindfulness, self-awareness, and inner peace.",system_prompt:"You are a mindful guide who promotes presence, self-awareness, and inner peace. You speak with calm, measured tones and often encourage others to pause and reflect. You help people become more aware of their thoughts, emotions, and physical sensations. You share mindfulness techniques and practices that can help with stress, anxiety, and emotional regulation. You emphasize the importance of being present in the moment and accepting things as they are. You're compassionate and non-judgmental, creating a safe space for others to explore their inner experiences. You believe in the power of simple practices like breathing, meditation, and mindful observation to transform one's relationship with life."}],c=async()=>{let[{CreateWebWorkerMLCEngine:e,MLCEngine:t,WebWorkerMLCEngine:a}]=await Promise.all([Promise.resolve().then(s.bind(s,8188))]);return{CreateWebWorkerMLCEngine:e,MLCEngine:t,WebWorkerMLCEngine:a}},d=e=>{console.log("detectFallbackTool called with:",e);let t=e.toLowerCase();if(t.includes("weather")||t.includes("temperature")){console.log("Weather query detected");let t=e.match(/in\s+([A-Za-z\s]+)/i);if(t)return console.log("Location found with 'in':",t[1].trim()),{name:"get_weather",args:JSON.stringify({location:t[1].trim()})};let s=e.match(/weather\s+of\s+([A-Za-z\s]+)/i);if(s)return console.log("Location found with 'weather of':",s[1].trim()),{name:"get_weather",args:JSON.stringify({location:s[1].trim()})};console.log("Weather query detected but no location found")}if(t.includes("time")||t.includes("what time")||t.includes("current time"))return console.log("Time query detected"),{name:"get_current_time",args:"{}"};if(t.includes("calculate")||t.includes("math")||t.includes("+")||t.includes("*")||t.includes("-")||t.includes("/")){console.log("Calculation query detected");let t=e.match(/(\d+\s*[\+\-\*\/]\s*\d+)/);if(t)return console.log("Math expression found:",t[1]),{name:"calculate",args:JSON.stringify({expression:t[1]})}}if(t.includes("search")||t.includes("find")||t.includes("look up")){console.log("Search query detected");let t=e.match(/for\s+(.+)/i);if(t)return console.log("Search query found:",t[1].trim()),{name:"search_web",args:JSON.stringify({query:t[1].trim()})}}return console.log("No fallback tool detected"),null},u=(e,t)=>{switch(e){case"get_current_time":return"The current time is ".concat(t.formatted,".");case"calculate":if(t.error)return"Calculation error: ".concat(t.error);return"The result of ".concat(t.expression," is ").concat(t.result,".");case"get_weather":if(t.note)return"Weather in ".concat(t.location,": ").concat(t.temperature,", ").concat(t.condition,", Humidity: ").concat(t.humidity,". (").concat(t.note,")");return"Weather in ".concat(t.location,": ").concat(t.temperature,", ").concat(t.condition,", Humidity: ").concat(t.humidity,".");case"search_web":if(t.results&&t.results.length>0){let e=t.results[0];return'Search results for "'.concat(t.query,'": ').concat(e.snippet," (").concat(t.note,")")}return'Search results for "'.concat(t.query,'": ').concat(t.note);default:return"Tool result: ".concat(JSON.stringify(t))}},m=e=>{let t;console.log("parseToolCalls called with:",e);let s=[],a=/<function>([^<]+)<\/function>/g;for(;null!==(t=a.exec(e));){console.log("Found function call:",t[1]);let a=t[1],n=e.substring(t.index+t[0].length).split("\n"),r="{}";for(let e=0;e<Math.min(5,n.length);e++){let t=n[e].trim();if(t.startsWith("{")&&t.includes("}")){r=t;break}}console.log("Parsed args:",r),s.push({id:"call_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:"function",function:{name:a,arguments:r}})}return console.log("Final tool calls:",s),s},h=(0,r.v)()((0,o.Zr)((e,t)=>({messages:[{role:"system",content:"You are an intelligent AI assistant with access to tools. CRITICAL RULES:\n1. NEVER say you can't provide information about time, weather, calculations, or current data\n2. ALWAYS use tools when asked about these topics\n3. Format tool calls EXACTLY like this:\n<function>tool_name</function>\n{arguments as JSON}\n\nAvailable tools:\n- get_current_time: Get current date/time (no arguments needed)\n- calculate: Perform math calculations (use expression parameter)\n- search_web: Search for information (use query parameter)\n- get_weather: Get weather info (use location parameter)\n\nExample: User asks 'What's the weather in Tokyo?' → Use get_weather tool with location 'Tokyo'"}],input:"",isGenerating:!1,isReady:!1,isWebGPU:!1,engine:null,model:"SmolLM2-360M-Instruct-q0f32-MLC",progress:{progress:0,text:"",timeElapsed:0},usage:null,abortController:null,modelList:[],temperature:.7,maxTokens:1e3,topP:1,frequencyPenalty:0,presencePenalty:0,stopSequences:[],seed:42,logprobs:0,systemPrompt:"You are an intelligent AI assistant with access to tools. CRITICAL RULES:\n1. NEVER say you can't provide information about time, weather, calculations, or current data\n2. ALWAYS use tools when asked about these topics\n3. Format tool calls EXACTLY like this:\n<function>tool_name</function>\n{arguments as JSON}\n\nAvailable tools:\n- get_current_time: Get current date/time (no arguments needed)\n- calculate: Perform math calculations (use expression parameter)\n- search_web: Search for information (use query parameter)\n- get_weather: Get weather info (use location parameter)\n\nExample: User asks 'What's the weather in Tokyo?' → Use get_weather tool with location 'Tokyo'",gpuVendor:null,enableTools:!1,selectedCharacter:null,customCharacters:[],setInput:t=>e({input:t}),setMessages:t=>e({messages:t}),addMessage:t=>e(e=>({messages:[...e.messages,t]})),updateLastMessage:t=>e(e=>({messages:e.messages.length>0?[...e.messages.slice(0,-1),{...e.messages[e.messages.length-1],content:t}]:e.messages})),clearMessages:()=>{let{getCurrentSystemPrompt:s}=t();e({messages:[{role:"system",content:s()}],usage:null})},setProgress:t=>e({progress:t}),setUsage:t=>e({usage:t}),setIsGenerating:t=>e({isGenerating:t}),setIsReady:t=>e({isReady:t}),setIsWebGPU:t=>e({isWebGPU:t}),setEngine:t=>e({engine:t}),setAbortController:t=>e({abortController:t}),setModelList:t=>e({modelList:t}),setTemperature:t=>e({temperature:t}),setMaxTokens:t=>e({maxTokens:t}),setTopP:t=>e({topP:t}),setFrequencyPenalty:t=>e({frequencyPenalty:t}),setPresencePenalty:t=>e({presencePenalty:t}),setStopSequences:t=>e({stopSequences:t}),setSeed:t=>e({seed:t}),setLogprobs:t=>e({logprobs:t}),setSystemPrompt:t=>e({systemPrompt:t}),setModel:s=>{e({model:s,isReady:!1,engine:null});let{loadEngine:a}=t();a()},setEnableTools:t=>e({enableTools:t}),setSelectedCharacter:t=>e({selectedCharacter:t}),addCustomCharacter:t=>e(e=>({customCharacters:[...e.customCharacters,{id:Date.now().toString(),...t}]})),updateCustomCharacter:(t,s)=>e(e=>({customCharacters:e.customCharacters.map(e=>e.id===t?{...e,...s}:e)})),deleteCustomCharacter:t=>e(e=>({customCharacters:e.customCharacters.filter(e=>e.id!==t)})),getCurrentSystemPrompt:()=>{let{selectedCharacter:e,customCharacters:s,systemPrompt:a}=t();if(e){let t=s.find(t=>t.id===e);if(t)return t.system_prompt;let a=i.find(t=>t.name===e);if(a)return a.system_prompt}return a},executeToolCall:async e=>{try{let t=(0,l.SG)(e.function.name);if(!t)return{error:"Tool ".concat(e.function.name," not found")};let s={};try{s=JSON.parse(e.function.arguments)}catch(t){return{error:"Invalid arguments: ".concat(e.function.arguments)}}return await t.execute(s)}catch(e){return{error:"Tool execution failed: ".concat(e)}}},processToolCalls:async e=>{let{enableTools:s}=t();if(console.log("processToolCalls called with content:",e),console.log("enableTools:",s),!s)return e;let a=m(e);if(console.log("Parsed tool calls:",a),0===a.length){let s=d(e);if(s){console.log("Using fallback tool:",s);let{executeToolCall:a,addMessage:n}=t(),r={id:"fallback_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:"function",function:{name:s.name,arguments:s.args}};n({role:"assistant",content:"Calling ".concat(r.function.name,"..."),tool_calls:[r]});let o=await a(r);console.log("Fallback tool result:",o),n({role:"tool",content:JSON.stringify(o,null,2),tool_call_id:r.id});let l=u(r.function.name,o);return"".concat(e,"\n\n").concat(l)}}if(0===a.length)return e;let n=e,{executeToolCall:r,addMessage:o}=t();for(let e of a){console.log("Executing tool call:",e),o({role:"assistant",content:"Calling ".concat(e.function.name,"..."),tool_calls:[e]});let t=await r(e);console.log("Tool result:",t),o({role:"tool",content:JSON.stringify(t,null,2),tool_call_id:e.id});let s="<function>".concat(e.function.name,"</function>\n").concat(e.function.arguments),a=u(e.function.name,t);n=n.replace(s,a)}return n},handleInputChange:t=>e({input:t.target.value}),handleSubmit:async()=>{let{input:s,isGenerating:a,engine:n,messages:r,temperature:o,maxTokens:l,topP:i,frequencyPenalty:c,presencePenalty:d,stopSequences:u,seed:m,logprobs:h,enableTools:p,getCurrentSystemPrompt:x}=t();if(!s.trim()||a||!n)return;let g=s.trim();e({input:""});let f={role:"system",content:x()},b={role:"user",content:g},y=[f,...r.filter(e=>"system"!==e.role&&"tool"!==e.role),b];e({messages:y,isGenerating:!0});let v=new AbortController;e({abortController:v});try{var w,j,N,k;let s=await (null==n?void 0:n.chat.completions.create({messages:y.filter(e=>"tool"!==e.role).map(e=>({role:e.role,content:e.content})),stream:!0,stream_options:{include_usage:!0},temperature:o,max_tokens:l,top_p:i,frequency_penalty:c,presence_penalty:d,stop:u.length>0?u:void 0,seed:m,logprobs:h>0?h:void 0})),a={role:"assistant",content:""};for await(let t of(e(e=>({messages:[...e.messages,a]})),s)){if(v.signal.aborted)break;let s=null==(N=t.choices)||null==(j=N[0])||null==(w=j.delta)?void 0:w.content;s&&(a.content+=s,e(e=>({messages:[...e.messages.slice(0,-1),{...a}]}))),t.usage&&e({usage:t.usage})}if(p&&a.content){console.log("About to process tool calls for content:",a.content);let{processToolCalls:s}=t(),n=await s(a.content);console.log("Processed content:",n),n!==a.content&&e(e=>({messages:e.messages.map((t,s)=>s===e.messages.length-1?{...t,content:n}:t)}))}else console.log("Tool processing skipped - enableTools:",p,"content length:",null==(k=a.content)?void 0:k.length)}catch(t){"AbortError"===t.name?(console.log("Generation stopped"),e(e=>({messages:e.messages.slice(0,-1)}))):console.error("Error during generation:",t)}finally{e({isGenerating:!1,abortController:null})}},handleStop:()=>{let{abortController:s}=t();s&&(s.abort(),e({isGenerating:!1,abortController:null}))},handleClear:()=>{let{systemPrompt:s}=t();e({messages:[{role:"system",content:s}],usage:null,input:""})},loadEngine:async()=>{try{let{CreateWebWorkerMLCEngine:a}=await c(),{model:n}=t(),r=await a(new Worker(s.tu(new URL(s.p+s.u(106),s.b)),{type:void 0}),n,{initProgressCallback:t=>{e({progress:{progress:t.progress,text:t.text,timeElapsed:t.timeElapsed}})}}),o=await r.getGPUVendor();e({engine:r,isReady:!0,gpuVendor:o})}catch(e){console.error("Failed to load MLC engine:",e)}},checkWebGPU:()=>{e({isWebGPU:!0})}}),{name:"chat",storage:(0,o.KU)(()=>localStorage),partialize:e=>({messages:e.messages,input:e.input,model:e.model,systemPrompt:e.systemPrompt,temperature:e.temperature,maxTokens:e.maxTokens,topP:e.topP,frequencyPenalty:e.frequencyPenalty,presencePenalty:e.presencePenalty,stopSequences:e.stopSequences,seed:e.seed,logprobs:e.logprobs,enableTools:e.enableTools,selectedCharacter:e.selectedCharacter,customCharacters:e.customCharacters})}));var p=s(3999),x=s(1154);function g(e){let{progress:t}=e;return(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(x.A,{className:"h-6 w-6 text-neutral-600 dark:text-neutral-400 animate-spin"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:"Loading model..."}),(0,a.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:t.text}),(0,a.jsx)("div",{className:"w-32 h-1 bg-neutral-200 dark:bg-neutral-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-neutral-600 dark:bg-neutral-400 transition-all duration-300",style:{width:"".concat(Math.round(100*t.progress),"%")}})})]})]})})}var f=s(7168);function b(e){let{suggestedQuestions:t,onQuestionClick:s}=e;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"text-center space-y-4 max-w-md",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100",children:"How can I help you today?"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 text-sm",children:"Ask me anything. Private by default, no data is stored."})]})}),t.length>0&&(0,a.jsx)("div",{className:"w-full max-w-md space-y-2 mt-6",children:t.map((e,t)=>(0,a.jsx)(f.$,{variant:"outline",className:"w-full justify-start text-left text-sm border-neutral-300 hover:border-neutral-400 hover:bg-neutral-50 dark:border-neutral-700 dark:hover:border-neutral-600 dark:hover:bg-neutral-800",onClick:()=>s(e),children:e},t))})]})}var y=s(7655);let v=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(y.bL,{ref:t,className:(0,p.cn)("relative overflow-hidden",s),...r,children:[(0,a.jsx)(y.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,a.jsx)(w,{}),(0,a.jsx)(y.OK,{})]})});v.displayName=y.bL.displayName;let w=n.forwardRef((e,t)=>{let{className:s,orientation:n="vertical",...r}=e;return(0,a.jsx)(y.VM,{ref:t,orientation:n,className:(0,p.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,a.jsx)(y.lr,{className:"relative flex-1 rounded-full bg-border"})})});w.displayName=y.VM.displayName;var j=s(4238),N=s(8313),k=s(646),C=s(4357),_=s(6671);function Y(e){let{message:t}=e,s="tool"===t.role,n=t.tool_calls&&t.tool_calls.length>0,r=()=>{navigator.clipboard.writeText(t.content),_.o.success("Copied to clipboard",{description:"You can paste it anywhere"})};return(0,a.jsx)("div",{className:(0,p.cn)("flex","user"===t.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:(0,p.cn)("max-w-[85%] rounded-lg px-4 py-3","user"===t.role?"bg-neutral-900 text-white dark:bg-white dark:text-neutral-900":"tool"===t.role?"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800":n?"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800":"bg-neutral-100 dark:bg-neutral-800"),children:[n&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-sm text-yellow-700 dark:text-yellow-300",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Tool call: ",t.tool_calls[0].function.name]})]}),s&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-sm text-blue-700 dark:text-blue-300",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Tool result"})]}),(0,a.jsxs)("div",{className:"prose dark:prose-invert max-w-none prose-sm prose-p:leading-relaxed prose-pre:p-0",children:[(0,a.jsx)(j.oz,{components:{p:e=>{let{children:t}=e;return(0,a.jsx)("p",{className:"mb-2 last:mb-0",children:t})},pre:e=>{let{children:t}=e;return(0,a.jsx)("pre",{className:"bg-neutral-200 dark:bg-neutral-700 p-3 rounded-md overflow-x-auto my-2 text-sm",children:t})},code:e=>{let{children:t}=e;return(0,a.jsx)("code",{className:"bg-neutral-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded text-sm",children:t})},ul:e=>{let{children:t}=e;return(0,a.jsx)("ul",{className:"list-disc pl-4 my-2",children:t})},ol:e=>{let{children:t}=e;return(0,a.jsx)("ol",{className:"list-decimal pl-4 my-2",children:t})},li:e=>{let{children:t}=e;return(0,a.jsx)("li",{className:"my-1",children:t})},h1:e=>{let{children:t}=e;return(0,a.jsx)("h1",{className:"text-xl font-bold my-3",children:t})},h2:e=>{let{children:t}=e;return(0,a.jsx)("h2",{className:"text-lg font-bold my-2",children:t})},h3:e=>{let{children:t}=e;return(0,a.jsx)("h3",{className:"text-base font-bold my-2",children:t})},blockquote:e=>{let{children:t}=e;return(0,a.jsx)("blockquote",{className:"border-l-4 border-neutral-300 dark:border-neutral-600 pl-4 my-2 italic",children:t})}},children:t.content}),"assistant"===t.role&&(0,a.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,a.jsxs)(f.$,{variant:"ghost",size:"icon",className:"flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400",onClick:r,children:[(0,a.jsx)(C.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-xs",children:"Copy"})]})})]})]})})}var S=s(1284);function A(e){let{messages:t,usage:s}=e,r=(0,n.useRef)(null),o=(0,n.useCallback)(()=>{var e;null==(e=r.current)||e.scrollIntoView({behavior:"smooth"})},[]);return(0,n.useEffect)(()=>{o()},[t,o]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{className:"flex-1 overflow-y-auto min-h-0 max-h-full",children:(0,a.jsxs)("div",{className:"space-y-4 p-4",children:[t.filter(e=>"system"!==e.role).map((e,t)=>(0,a.jsx)(Y,{message:e},t)),(0,a.jsx)("div",{ref:r})]})}),s&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400 border-neutral-200 dark:border-neutral-800",children:[(0,a.jsx)(S.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[s.total_tokens," tokens used"]})]})]})}var T=s(8979),q=s(2486);function P(){let{input:e,isGenerating:t,handleInputChange:s,handleSubmit:r,handleStop:o}=h(),[l,i]=(0,n.useState)(!1),c=async e=>{e.preventDefault(),l||await r()},d=e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),l||r())};return(0,a.jsxs)("form",{onSubmit:c,className:"flex items-center gap-2 p-4",children:[(0,a.jsx)("div",{className:"flex-1 relative",children:(0,a.jsx)("textarea",{value:e,onChange:s,onKeyDown:d,onCompositionStart:()=>i(!0),onCompositionEnd:()=>i(!1),placeholder:"Type your message...",className:"w-full resize-none rounded-md border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 py-2 text-sm placeholder:text-neutral-500 dark:placeholder:text-neutral-400 focus:outline-none focus:ring-1 focus:ring-neutral-400 dark:focus:ring-neutral-600 disabled:cursor-not-allowed disabled:opacity-50 min-h-[40px] max-h-[120px] text-neutral-900 dark:text-neutral-100",rows:1,disabled:t})}),(0,a.jsx)(f.$,{type:"submit",size:"icon",variant:"ghost",disabled:!t&&(!e.trim()||l),className:"h-8 w-8 text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-800",children:t?(0,a.jsx)(T.A,{className:"h-4 w-4"}):(0,a.jsx)(q.A,{className:"h-4 w-4"})})]})}var E=s(8188),F=s(968);let z=(0,s(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),I=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(F.b,{ref:t,className:(0,p.cn)(z(),s),...n})});I.displayName=F.b.displayName;let L=n.forwardRef((e,t)=>{let{className:s,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:(0,p.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});L.displayName="Input";var M=s(9474),G=s(5784);function R(){let e=i,{selectedCharacter:t,setSelectedCharacter:s,customCharacters:r,addCustomCharacter:o,updateCustomCharacter:l,deleteCustomCharacter:c,setSystemPrompt:d}=h(),[u,m]=n.useState(!1),[p,x]=n.useState(null),[g,f]=n.useState({icon:"",name:"",description:"",system_prompt:""}),b=t=>{s(t);let a=e.find(e=>e.name===t);a&&d(a.system_prompt)},y=e=>{s(e);let t=r.find(t=>t.id===e);t&&d(t.system_prompt)},v=()=>{p?(l(p,g),x(null)):o(g),f({icon:"",name:"",description:"",system_prompt:""}),m(!1)},w=e=>{x(e.id),f({icon:e.icon,name:e.name,description:e.description,system_prompt:e.system_prompt}),m(!0)},j=e=>{c(e),t===e&&s(null)};return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-md font-semibold",children:"Chat Characters"}),(0,a.jsx)("button",{onClick:()=>m(!0),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Custom"})]}),(0,a.jsx)("div",{className:" w-sm whitespace-nowrap overflow-x-auto",children:(0,a.jsxs)("div",{className:"flex w-max space-x-2 p-4",children:[(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md ".concat(null===t?"border-blue-500 bg-blue-50 dark:bg-blue-950 shadow-md":"border-gray-200 hover:border-gray-300"),onClick:()=>s(null),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"⚙️"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-sm",children:"Custom System Prompt"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Use your own custom system prompt"})]})]})}),e.map(e=>(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md min-w-[200px] max-w-[250px] ".concat(t===e.name?"border-blue-500 bg-blue-50 dark:bg-blue-950 shadow-md":"border-gray-200 hover:border-gray-300"),onClick:()=>b(e.name),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900 dark:to-purple-900 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-lg",children:e.icon})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h5",{className:"font-medium text-sm truncate",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description})]})]})},e.name))]})}),r.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-muted-foreground",children:"Your Custom Characters"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 overflow-x-auto",children:r.map(e=>(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg transition-all hover:shadow-md min-w-[200px] max-w-[250px] ".concat(t===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-950 shadow-md":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-100 to-teal-100 dark:from-green-900 dark:to-teal-900 rounded-full flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-lg",children:"✨"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>y(e.id),children:[(0,a.jsx)("h5",{className:"font-medium text-sm truncate",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex gap-1 ml-2 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>w(e),className:"p-1 text-xs text-blue-500 hover:text-blue-600 hover:bg-blue-50 rounded",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"p-1 text-xs text-red-500 hover:text-red-600 hover:bg-red-50 rounded",children:"Delete"})]})]})})]})},e.id))})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:p?"Edit Character":"Add Custom Character"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(I,{htmlFor:"char-name",children:"Name"}),(0,a.jsx)(L,{id:"char-name",value:g.name,onChange:e=>f({...g,name:e.target.value}),placeholder:"Character name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(I,{htmlFor:"char-description",children:"Description"}),(0,a.jsx)(L,{id:"char-description",value:g.description,onChange:e=>f({...g,description:e.target.value}),placeholder:"Brief description of the character"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(I,{htmlFor:"char-prompt",children:"System Prompt"}),(0,a.jsx)(M.T,{id:"char-prompt",value:g.system_prompt,onChange:e=>f({...g,system_prompt:e.target.value}),placeholder:"Enter the system prompt that defines this character's behavior...",rows:4})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,a.jsx)("button",{onClick:v,disabled:!g.name||!g.system_prompt,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:p?"Update":"Add"}),(0,a.jsx)("button",{onClick:()=>{m(!1),x(null),f({icon:"",name:"",description:"",system_prompt:""})},className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"})]})]})})]})}var U=s(5452),W=s(4416);function O(e){let{...t}=e;return(0,a.jsx)(U.bL,{"data-slot":"sheet",...t})}function D(e){let{...t}=e;return(0,a.jsx)(U.l9,{"data-slot":"sheet-trigger",...t})}function J(e){let{...t}=e;return(0,a.jsx)(U.ZL,{"data-slot":"sheet-portal",...t})}function V(e){let{className:t,...s}=e;return(0,a.jsx)(U.hJ,{"data-slot":"sheet-overlay",className:(0,p.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function $(e){let{className:t,children:s,side:n="right",...r}=e;return(0,a.jsxs)(J,{children:[(0,a.jsx)(V,{}),(0,a.jsxs)(U.UC,{"data-slot":"sheet-content",className:(0,p.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===n&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===n&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===n&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===n&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[s,(0,a.jsxs)(U.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,a.jsx)(W.A,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function B(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"sheet-header",className:(0,p.cn)("flex flex-col gap-1.5 p-4",t),...s})}function Z(e){let{className:t,...s}=e;return(0,a.jsx)(U.hE,{"data-slot":"sheet-title",className:(0,p.cn)("text-foreground font-semibold",t),...s})}var K=s(381);function H(e){let{open:t,onOpenChange:s}=e,{model:r,setModel:o,systemPrompt:l,setSystemPrompt:i,temperature:c,setTemperature:d,maxTokens:u,setMaxTokens:m,topP:p,setTopP:x,frequencyPenalty:g,setFrequencyPenalty:b,presencePenalty:y,setPresencePenalty:v,stopSequences:w,setStopSequences:j,seed:N,setSeed:k,logprobs:C,setLogprobs:_,modelList:Y,setModelList:S,gpuVendor:A,enableTools:T,setEnableTools:q}=h();n.useEffect(()=>{0===Y.length&&S(E.prebuiltAppConfig.model_list.map(e=>({name:e.model_id,value:e.model_id})))},[Y.length,S]);let P=Y.map(e=>({value:e.value,label:e.name}));return(0,a.jsxs)(O,{children:[(0,a.jsx)(D,{asChild:!0,children:(0,a.jsx)(f.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(K.A,{className:"w-4 h-4"})})}),(0,a.jsxs)($,{className:" overflow-x-hidden overflow-y-scroll p-4 w-[1400px] sm:w-[540px]",children:[(0,a.jsx)(B,{children:(0,a.jsx)(Z,{children:"Chat Settings"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(R,{}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"model",children:"Model"}),(0,a.jsxs)(G.l6,{value:r,onValueChange:e=>o(e),children:[(0,a.jsx)(G.bq,{children:(0,a.jsx)(G.yv,{})}),(0,a.jsx)(G.gC,{children:P.map(e=>(0,a.jsx)(G.eb,{className:"text-sm",value:e.value,children:e.label},e.value))})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose the language model to use for the chat."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"enable-tools",children:"Enable Tools"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{id:"enable-tools",type:"checkbox",checked:T,onChange:e=>q(e.target.checked),className:"rounded border-gray-300"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Allow the AI to use tools for calculations, time, weather, and web search"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"system-prompt",children:"System Prompt"}),(0,a.jsx)(M.T,{id:"system-prompt",value:l,onChange:e=>i(e.target.value),placeholder:"Enter the system prompt that defines the assistant's behavior...",rows:4}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"This prompt defines the assistant's personality and behavior."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"temperature",children:"Temperature"}),(0,a.jsx)(L,{id:"temperature",type:"number",min:"0",max:"2",step:"0.1",value:c,onChange:e=>d(parseFloat(e.target.value))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Controls randomness (0 = deterministic, 2 = very random)"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"max-tokens",children:"Max Tokens"}),(0,a.jsx)(L,{id:"max-tokens",type:"number",min:"1",max:"4000",value:u,onChange:e=>m(parseInt(e.target.value))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Maximum number of tokens to generate"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"top-p",children:"Top P"}),(0,a.jsx)(L,{id:"top-p",type:"number",min:"0",max:"1",step:"0.1",value:p,onChange:e=>x(parseFloat(e.target.value))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nucleus sampling parameter (0-1)"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"seed",children:"Seed"}),(0,a.jsx)(L,{id:"seed",type:"number",value:N,onChange:e=>k(parseInt(e.target.value))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Random seed for reproducible results"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"frequency-penalty",children:"Frequency Penalty"}),(0,a.jsx)(L,{id:"frequency-penalty",type:"number",min:"-2",max:"2",step:"0.1",value:g,onChange:e=>b(parseFloat(e.target.value))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Reduces repetition of frequent tokens"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"presence-penalty",children:"Presence Penalty"}),(0,a.jsx)(L,{id:"presence-penalty",type:"number",min:"-2",max:"2",step:"0.1",value:y,onChange:e=>v(parseFloat(e.target.value))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Reduces repetition of any token"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"logprobs",children:"Logprobs"}),(0,a.jsx)(L,{id:"logprobs",type:"number",min:"0",max:"5",value:C,onChange:e=>_(parseInt(e.target.value))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Number of logprobs to return (0-5)"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"stop-sequences",children:"Stop Sequences"}),(0,a.jsx)(M.T,{id:"stop-sequences",value:w.join("\n"),onChange:e=>j(e.target.value.split("\n").filter(e=>e.trim())),placeholder:"Enter stop sequences, one per line...",rows:3}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sequences that will stop generation when encountered (one per line)"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(I,{htmlFor:"gpu-vendor",children:"GPU Vendor"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:A})]})]})]})]})}function Q(e){let{onClear:t}=e,[s,r]=(0,n.useState)(!1),{selectedCharacter:o,customCharacters:l}=h(),c=()=>{if(!o)return{icon:"\uD83D\uDC64",name:"Custom"};let e=l.find(e=>e.id===o);if(e)return e;let t=i.find(e=>e.name===o);return t||{icon:"\uD83D\uDC64",name:"Custom"}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("a",{href:"/",className:"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors",children:"← Back"}),(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"AI Chat"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[o&&(0,a.jsxs)("span",{className:"text-xs px-2 space-x-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full",children:[(0,a.jsx)("span",{className:"text-lg",children:c().icon}),(0,a.jsx)("span",{className:"text-sm",children:c().name})]}),(0,a.jsx)(f.$,{variant:"ghost",size:"sm",onClick:t,className:"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 hover:bg-neutral-100 dark:hover:bg-neutral-800",children:"Clear"}),(0,a.jsx)(H,{open:s,onOpenChange:r})]})]})})}function X(){return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md mx-auto p-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center",children:(0,a.jsx)(W.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"WebGPU Not Supported"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please use a Chrome-based browser to access this feature."})]})]})})}function ee(){let{messages:e,isWebGPU:t,isReady:s,progress:r,usage:o,setInput:l,handleSubmit:i,handleClear:c,loadEngine:d,setIsWebGPU:u}=h(),[m,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(0,p.B)()&&(u(!0),d())},[u,d]);let f=e=>{l(e)};return t?(0,a.jsxs)("main",{className:"flex-1 w-full max-w-2xl h-full mx-auto py-1.5 flex flex-col gap-10 overflow-hidden",children:[(0,a.jsx)(Q,{onClear:c}),(0,a.jsx)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden w-full max-h-[calc(100vh-280px)]",children:s?1===e.length?(0,a.jsx)(b,{suggestedQuestions:[],onQuestionClick:f}):(0,a.jsx)(A,{messages:e,usage:o}):(0,a.jsx)(g,{progress:r})}),(0,a.jsx)(P,{})]}):(0,a.jsx)(X,{})}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(5155),n=s(2115),r=s(9708),o=s(2085),l=s(3999);let i=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:s,variant:n,size:o,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(i({variant:n,size:o,className:s})),ref:t,...d})});c.displayName="Button"},9474:(e,t,s)=>{"use strict";s.d(t,{T:()=>o});var a=s(5155),n=s(2115),r=s(3999);let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});o.displayName="Textarea"},9701:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{SG:()=>findTool});let tools=[{name:"get_current_time",description:"Get the current date and time",parameters:{type:"object",properties:{},required:[]},execute:async()=>({current_time:new Date().toISOString(),formatted:new Date().toLocaleString()})},{name:"calculate",description:"Perform basic mathematical calculations",parameters:{type:"object",properties:{expression:{type:"string",description:"The mathematical expression to evaluate (e.g., '2 + 2', '10 * 5')"}},required:["expression"]},execute:async args=>{try{let sanitized=args.expression.replace(/[^0-9+\-*/().\s]/g,""),result=eval(sanitized);return{expression:args.expression,result:result,sanitized_expression:sanitized}}catch(error){return{error:"Invalid mathematical expression",expression:args.expression}}}},{name:"search_web",description:"Search the web for current information (simulated)",parameters:{type:"object",properties:{query:{type:"string",description:"The search query"}},required:["query"]},execute:async e=>({query:e.query,results:[{title:"Search results for: ".concat(e.query),snippet:'This is a simulated search result for "'.concat(e.query,'". In a real implementation, this would connect to a search API like Google, Bing, or DuckDuckGo.'),url:"https://example.com/search?q=".concat(encodeURIComponent(e.query))}],note:"This is a simulated search. For real web search, integrate with a search API."})},{name:"get_weather",description:"Get current weather information (simulated)",parameters:{type:"object",properties:{location:{type:"string",description:"City name or location"}},required:["location"]},execute:async e=>{let t=["Sunny","Cloudy","Rainy","Snowy","Partly Cloudy"],s=t[Math.floor(Math.random()*t.length)],a=Math.floor(30*Math.random())+10;return{location:e.location,temperature:"".concat(a,"\xb0C"),condition:s,humidity:"".concat(Math.floor(40*Math.random())+40,"%"),note:"This is simulated weather data. For real weather, integrate with a weather API."}}}],findTool=e=>tools.find(t=>t.name===e),getToolSchemas=()=>tools.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.parameters}})),testToolParsing=()=>{let e,t="Let me get the current time for you.\n\n<function>get_current_time</function>\n{}\n\nThe current time is shown above.";console.log("Testing tool parsing with:",t);let s=/<function>([^<]+)<\/function>/g;for(;null!==(e=s.exec(t));)console.log("Found function call:",e[1])},testFallbackDetection=()=>{["What time is it?","Calculate 2 + 2","What's the weather in Tokyo?","Search for AI news"].forEach(e=>{let t=e.toLowerCase(),s=null;if(t.includes("time")||t.includes("what time")||t.includes("current time"))s={name:"get_current_time",args:"{}"};else if(t.includes("calculate")||t.includes("math")||t.includes("+")||t.includes("*")||t.includes("-")||t.includes("/")){let t=e.match(/(\d+\s*[\+\-\*\/]\s*\d+)/);t&&(s={name:"calculate",args:JSON.stringify({expression:t[1]})})}else if(t.includes("weather")||t.includes("temperature")){let t=e.match(/in\s+([A-Za-z\s]+)/i);t&&(s={name:"get_weather",args:JSON.stringify({location:t[1].trim()})})}else if(t.includes("search")||t.includes("find")||t.includes("look up")){let t=e.match(/for\s+(.+)/i);t&&(s={name:"search_web",args:JSON.stringify({query:t[1].trim()})})}console.log('Test case: "'.concat(e,'" -> Detected tool:'),s)})}}},e=>{var t=t=>e(e.s=t);e.O(0,[775,352,671,641,485,639,441,684,358],()=>t(2446)),_N_E=e.O()}]);