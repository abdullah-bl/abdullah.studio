---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../../layouts/layout.astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.id },
        props: { post },
    }));
}

const { post } = Astro.props as { post: CollectionEntry<"blog"> };
const { Content } = await post.render();
---

<Layout title={post.data.title}>
    <article class="max-w-4xl mx-auto px-4 py-8">
        <header class="mb-8">
            <h1 class="text-4xl font-bold mb-4">{post.data.title}</h1>
            <p class="text-lg text-muted-foreground mb-4">
                {post.data.description}
            </p>
            <time class="text-sm text-muted-foreground">
                {
                    post.data.pubDate.toLocaleDateString("en-US", {
                        year: "numeric",
                        month: "long",
                        day: "numeric",
                    })
                }
            </time>
        </header>

        <div class="prose prose-lg max-w-none">
            <Content />
        </div>

        <footer class="mt-12 pt-8 border-t border-gray-200">
            <a href="/blog" class="text-blue-600 hover:text-blue-800">
                ‚Üê Back to Blog
            </a>
        </footer>
    </article>
</Layout>

<style>
    .prose {
        @apply text-foreground;
    }

    .prose h1 {
        @apply text-3xl font-bold mb-6 mt-8;
    }

    .prose h2 {
        @apply text-2xl font-bold mb-4 mt-6;
    }

    .prose h3 {
        @apply text-xl font-bold mb-3 mt-5;
    }

    .prose p {
        @apply mb-4 leading-relaxed;
    }

    .prose ul {
        @apply mb-4 pl-6;
    }

    .prose li {
        @apply mb-2;
    }

    .prose code {
        @apply bg-gray-100 px-2 py-1 rounded text-sm;
    }

    .prose pre {
        @apply bg-gray-100 p-4 rounded-lg mb-4 overflow-x-auto;
    }

    .prose blockquote {
        @apply border-l-4 border-gray-300 pl-4 italic my-4;
    }
</style>
